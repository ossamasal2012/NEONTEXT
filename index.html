<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>جدار النيون المتكامل</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Monoton&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-color: #ff0000;
            --neon-glow: rgba(255, 0, 0, 0.7);
            --font-size: 4rem;
            --custom-font-family: 'Monoton', cursive;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: #0a0a0a;
            font-family: 'Cairo', sans-serif;
            overflow: hidden;
        }

        .brick-wall {
            background-color: #1a1a1a;
            background-image: 
                linear-gradient(335deg, #111 23px, transparent 23px),
                linear-gradient(155deg, #0a0a0a 23px, transparent 23px),
                linear-gradient(335deg, #111 23px, transparent 23px),
                linear-gradient(155deg, #0a0a0a 23px, transparent 23px);
            background-size: 58px 58px;
            background-position: 0px 2px, 4px 35px, 29px 31px, 34px 6px;
            position: relative;
            height: 100vh;
            width: 100vw;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: inset 0 0 100px rgba(0,0,0,0.8);
        }

        .neon-frame {
            border: 6px solid var(--neon-color);
            padding: 40px 60px;
            border-radius: 60px 60px 100px 100px; 
            position: relative;
            transition: border-color 0.1s linear, box-shadow 0.1s linear;
            box-shadow: 
                0 0 15px var(--neon-glow),
                0 0 30px var(--neon-glow),
                inset 0 0 15px var(--neon-glow);
            display: flex;
            align-items: center;
            justify-content: center;
            max-width: 90%;
            min-height: 250px;
        }

        .neon-text {
            font-family: var(--custom-font-family); 
            font-size: var(--font-size);
            color: var(--neon-color);
            text-align: center;
            text-shadow: 
                0 0 10px var(--neon-glow),
                0 0 20px var(--neon-glow),
                0 0 40px var(--neon-glow);
            transition: color 0.1s linear, text-shadow 0.1s linear;
            word-break: break-word;
            line-height: 1.2;
        }

        .neon-off .neon-frame { border-color: #333; box-shadow: none; }
        .neon-off .neon-text { color: #222; text-shadow: none; }

        .controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 20px;
            border: 1px solid #444;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            justify-content: center;
            z-index: 100;
            backdrop-filter: blur(10px);
            width: fit-content;
            max-width: 95vw;
        }

        #exit-fullscreen-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 10px 15px;
            border-radius: 12px;
            cursor: pointer;
            z-index: 200;
            display: none;
        }

        .fullscreen-active .controls { display: none; }
        .fullscreen-active #exit-fullscreen-btn { display: block; }

        input[type="text"] { background: #222; color: white; border: 1px solid #444; padding: 8px 15px; border-radius: 8px; width: 120px; }
        .btn { background: #333; color: white; padding: 8px 12px; border-radius: 8px; font-size: 0.8rem; cursor: pointer; }
        .file-input-label { background: #2c3e50; color: white; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 0.8rem; }
        input[type="range"] { cursor: pointer; accent-color: #ff0000; width: 70px; }
        .control-group { display: flex; flex-direction: column; gap: 4px; align-items: center; }
    </style>
</head>
<body id="main-body">

    <button id="exit-fullscreen-btn">خروج من وضع التركيز ×</button>

    <div id="wall" class="brick-wall">
        <div class="neon-frame" id="frame">
            <div class="neon-text" id="display-text">Hello</div>
        </div>
    </div>

    <div class="controls" id="ui-controls">
        <div class="control-group">
            <label class="text-[10px] text-gray-400">النص</label>
            <input type="text" id="text-input" value="Hello">
        </div>
        
        <div class="control-group">
            <label class="text-[10px] text-gray-400">وضع RGB</label>
            <input type="checkbox" id="rgb-mode">
        </div>

        <div class="control-group" id="speed-control-container" style="display: none;">
            <label class="text-[10px] text-gray-400">سرعة RGB</label>
            <input type="number" id="rgb-speed" value="3" min="0" step="0.1" 
                   style="background: #222; color: white; border: 1px solid #444; padding: 4px; border-radius: 5px; width: 50px; text-align: center;">
        </div>

        <div class="control-group">
            <label class="text-[10px] text-gray-400">تحميل خط</label>
            <label for="font-upload" class="file-input-label">اختر ملف</label>
            <input type="file" id="font-upload" accept=".ttf,.otf,.woff,.woff2" style="display:none;">
        </div>

        <div class="control-group">
            <label class="text-[10px] text-gray-400">قوة النيون</label>
            <input type="range" id="glow-intensity" min="0" max="1.7" step="0.1" value="0.7">
        </div>

        <div class="control-group">
            <label class="text-[10px] text-gray-400">الحجم</label>
            <input type="range" id="font-size-slider" min="1" max="17" step="0.5" value="4">
        </div>

        <button class="btn" id="toggle-neon">ON/OFF</button>
        <button class="btn bg-red-600" id="fullscreen-btn">ملء الشاشة</button>
    </div>

    <script>
        const textInput = document.getElementById('text-input');
        const displayText = document.getElementById('display-text');
        const fontSizeSlider = document.getElementById('font-size-slider');
        const intensitySlider = document.getElementById('glow-intensity');
        const rgbMode = document.getElementById('rgb-mode');
        const rgbSpeed = document.getElementById('rgb-speed');
        const speedContainer = document.getElementById('speed-control-container');
        const fontUpload = document.getElementById('font-upload');
        const body = document.getElementById('main-body');
        const wall = document.getElementById('wall');

        let hue = 0;
        let isNeonOn = true;
        let currentRawColor = "hsl(0, 100%, 50%)";

        function applyStyles() {
            if (!isNeonOn) return;
            
            const opacity = intensitySlider.value;
            let colorToUse = rgbMode.checked ? `hsl(${hue}, 100%, 50%)` : "#ff0000"; // يمكنك إضافة colorPicker هنا لاحقاً
            
            document.documentElement.style.setProperty('--neon-color', colorToUse);
            const glowValue = colorToUse.startsWith('hsl') 
                ? colorToUse.replace('hsl', 'hsla').replace(')', `, ${opacity})`)
                : hexToRgba("#ff0000", opacity);
            
            document.documentElement.style.setProperty('--neon-glow', glowValue);
            document.documentElement.style.setProperty('--font-size', fontSizeSlider.value + 'rem');
        }

        function hexToRgba(hex, alpha) {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }

        function animateRGB() {
            if (isNeonOn && rgbMode.checked) {
                hue = (hue + (parseFloat(rgbSpeed.value) || 0)) % 360;
                applyStyles();
            }
            requestAnimationFrame(animateRGB);
        }

        fontUpload.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    const fontFace = new FontFace('UserFont', event.target.result);
                    fontFace.load().then((loadedFace) => {
                        document.fonts.add(loadedFace);
                        document.documentElement.style.setProperty('--custom-font-family', 'UserFont');
                    });
                };
                reader.readAsArrayBuffer(file);
            }
        });

        rgbMode.addEventListener('change', () => {
            speedContainer.style.display = rgbMode.checked ? 'flex' : 'none';
            applyStyles();
        });

        intensitySlider.addEventListener('input', applyStyles);
        fontSizeSlider.addEventListener('input', applyStyles);
        textInput.addEventListener('input', (e) => displayText.textContent = e.target.value || ' ');

        document.getElementById('toggle-neon').addEventListener('click', () => {
            isNeonOn = !isNeonOn;
            wall.classList.toggle('neon-off', !isNeonOn);
            applyStyles();
        });

        document.getElementById('fullscreen-btn').addEventListener('click', () => {
            if (body.requestFullscreen) body.requestFullscreen();
            body.classList.add('fullscreen-active');
        });

        document.getElementById('exit-fullscreen-btn').addEventListener('click', () => {
            if (document.exitFullscreen) document.exitFullscreen();
        });

        document.addEventListener('fullscreenchange', () => {
            if (!document.fullscreenElement) body.classList.remove('fullscreen-active');
        });

        animateRGB();
        applyStyles();
    </script>
</body>
</html>
